<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content />
        <meta name="author" content />
        <title>Class DEntity - uim framework</title>
        <link rel="icon" type="image/x-icon"
            href="https://uimsolutions.github.io/uim/assets/favicon.ico" />
        <link href="https://uimsolutions.github.io/uim/css/tabler.min.css" rel="stylesheet" />
    </head>
    <body>
        <div class="page">
            <header class="navbar navbar-expand-md d-print-none">
    <div class="container-xl">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbar-menu" aria-controls="navbar-menu"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div
            class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3">
            <a href=".">UIM FRAMEWORK
            </a>
        </div>
        <div class="navbar-nav flex-row order-md-last">
            <div class="nav-item d-none d-md-flex me-3">
                <div class="btn-list">
                    <a href="https://github.com/UIMSolutions/uim" class="btn"
                        target="_blank" rel="noreferrer">
                        Source code
                    </a>
                    <a href="https://www.patreon.com/sicherheitsschmiede/posts"
                        class="btn"
                        target="_blank" rel="noreferrer">
                        Sponsor
                    </a>
                </div>
            </div>
        </div>
    </div>
</header>
<header class="navbar-expand-md">
    <div class="collapse navbar-collapse" id="navbar-menu">
        <div class="navbar">
            <div class="container-xl">
                <div class="row flex-fill align-items-center">
                    <div class="col">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="https://uimsolutions.github.io/uim">
                                    Home
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                    href="https://uimsolutions.github.io/uim/api/interfaces">Interfaces</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                    href="https://uimsolutions.github.io/uim//api/classes">Classes</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                    href="https://uimsolutions.github.io/uim/api/libraries">Libraries</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                    href="https://uimsolutions.github.io/uim/api/packages">Packages</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
            <div class="page-wrapper">
                <div class="page-header">
                    <div class="row align-items-center mw-100">
                        <div class="col">
                            <div class="container-xl">
                                <div class="page-pretitle">
                                    Class
                                </div>
                                <h2 class="page-title">
                                    DEntity
                                </h2>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="page-body">
                    <div class="col">
                        <div class="container-xl">
                            <table><tr><td>origin:C:\Users\ONS\PROJECTS2023\uim\models\uim\models\classes\entities\entity.d</td></tr><tr><td>isFinal:false</td></tr><tr><td>package:uim.models.classes.entities</td></tr><tr><td>visibility:public</td></tr><tr><td>name:DEntity</td></tr><tr><td>isAbstract:false</td></tr><tr><td>namespace:uim.models.classes.entities.entity</td></tr><tr><td>header:class DEntity : DElement, IEntity /* : IRegistrable */</td></tr><tr><td>methods:["mixin(DataThis!());","this(UUID myId)","this().id(myId);","name(id.toString);","this(UUID myId, string myName)","this(myId).name(myName);","this(Json aJson)","this();","fromJson(aJson);","override bool initialize(Json[string] initData = null)","classname(\"Entity\");","id(randomUUID);","etag(toTimestamp(now));","name(id.toString);","createdOn(now);","lastAccessedOn(createdOn);","hasVersions(false);","hasLanguages(false);","config(Json.emptyObject);","requestPrefix(\"entity_\");","versionOn(createdOn);","versionNumber(1L); // Allways starts with version 1;","versionBy(createdBy);","mixin(TProperty!(\"string\", \"routingPath\")); // required for routing","mixin(DataProperty!(\"string\", \"description\"));","writeln(entity);","assert(entity.description == \"newDescription\");","assert(entity.description != \"noDescription\");","entity.description(\"otherDescription\");","assert(entity.description == \"otherDescription\");","mixin(DataProperty!(\"string\", \"pool\"));","assert(entity.pool == \"newPool\");","assert(entity.pool != \"noPool\");","entity.pool(\"otherPool\");","assert(entity.pool == \"otherPool\");","mixin(IntegerDataProperty!(\"versionNumber\", \"version.number\"));","mixin(TimeStampDataProperty!(\"versionOn\", \"version.on\"));","assert(entity.versionOn == timestamp);","assert(entity.versionOn != 1);","timestamp = toTimestamp(now);","entity.versionOn(timestamp);","assert(entity.versionOn == timestamp);","mixin(UUIDDataProperty!(\"versionBy\", \"version.by\"));","assert(entity.versionBy == id);","assert(entity.versionBy != randomUUID);","entity.versionBy(id);","assert(entity.versionBy == id);","mixin(DataProperty!(\"string\", \"versionDescription\", \"version.description\"));","assert(entity[\"version.description\"] == \"version with description\");","assert(entity.versionDescription == \"version with new description\");","assert(entity.versionDescription != \"noVersionDescription\");","entity.versionDescription(\"version with other description\");","assert(entity.versionDescription == \"version with other description\");","mixin(DataProperty!(\"string\", \"versionDisplay\", \"version.display\"));","assert(entity.versionDisplay == \"newVersionDisplay\");","assert(entity.versionDisplay != \"noVersionDisplay\");","entity.versionDisplay(\"otherVersionDisplay\");","assert(entity.versionDisplay == \"otherVersionDisplay\");","mixin(DataProperty!(\"string\", \"versionMode\", \"version.mode\"));","assert(entity.versionMode == \"newVersionMode\");","assert(entity.versionMode != \"noVersionMode\");","entity.versionMode(\"otherVersionMode\");","assert(entity.versionMode == \"otherVersionMode\");","string[] fieldNames()","bool opEquals(DEntity checkEntity)","return (id == checkEntity.id);","mixin(TProperty!(\"UUID\", \"id\"));","@property void id(string newValue)","id(UUID(newValue));","mixin(TProperty!(\"long\", \"etag\"));","@property void etag(string newValue)","etag(to!long(newValue));","mixin(TProperty!(\"string\", \"siteName\"));","mixin(TProperty!(\"Json\", \"config\"));","void createVersion(string display = \"\", string description = \"\")","result.versionOn(now);","result.versionBy(user);","foreach(json; model.jsons([id]))","results ~= (new DO(model)).fromJson(json);","void attribute(string name, string type)","Json json = parseJsonString(type);","attribute(name, json);","switch(type.lower)","void attribute(string name, Json json)","switch(json[\"datatype\"].get!string.lower)","case \"bool\": _attributes[name] = OOPAttributeBool.config(json); break;","case \"long\": _attributes[name] = OOPLongAttribute.config(json); break;","case \"double\": _attributes[name] = OOPAttributeDouble.config(json); break;","case \"string\": _attributes[name] = OOPStringAttribute.config(json); break;","case \"userid\": _attributes[name] = OOPAttributeUserId.config(json); break;","case \"uuid\": _attributes[name] = OOPUUIDAttribute.config(json); break;","case \"array\": _attributes[name] = OOPArrayAttribute.config(json); break;","case \"object\": _attributes[name] = OOPAttributeObject.config(json); break;","_attributes[name] = OOPStringAttribute.config(json); break;","void attribute(string name, DOOPAttribute newAttribute)","mixin(TProperty!(\"UUID\", \"id\"));","version(test_uim_models)","assert(Entity.id(id1).id == id1);","assert(Entity.id(id1).id(id2).id == id2);","myValue.value(aValue);","writeln(\"Unknown value in \"~classname);","void opDispatch(string name, UUID value)(UUID aValue)","myUUIDData.value(aValue);","writeln(\"Unknown value in \" ~ classname);","newAttributes.each!(newAttribute => addAttribute(newAttribute));","void addAttributes(DAttribute[string] newAttributes)","newAttributes.byKey.each!(key => values[key] = newAttributes[key].createValue);","void addAttributes(Json[string] newValues)","values.add(newValues);","void addAttribute(DAttribute newAttribute)","void addAttribute(string key, Json aValue)","entity.addData(\"int\", new DIntegerData(10));","assert(cast(DIntegerData) entity.values[\"int\"]);","assert(entity.getString(\"int\") == \"10\");","assert((cast(DIntegerData) entity.values[\"int\"]).value == 10);","entity.addData(new DCityNameAttribute);","assert((cast(DStringData) entity.values[\"cityName\"]));","mixin(TProperty!(\"string\", \"display\"));","mixin(TProperty!(\"long\", \"createdOn\"));","@property void createdOn(SysTime aTime)","createdOn(toTimestamp(aTime));","@property void createdOn(string aTime)","createdOn(to!long(aTime));","version (test_uim_models)","assert(Entity.createdOn(now1).createdOn == now1);","assert(Entity.createdOn(now1).createdOn(now2).createdOn == now2);","mixin(TProperty!(\"UUID\", \"createdBy\"));","@property void createdBy(string anUuid)","createdBy(UUID(anUuid));","mixin(TProperty!(\"long\", \"lastAccessedOn\"));","@property void lastAccessedOn(SysTime aTime)","lastAccessedOn(toTimestamp(aTime));","@property void lastAccessedOn(string aTime)","lastAccessedOn(to!long(aTime));","version (test_uim_models)","assert(Entity.createdOn(now1).createdOn == now1);","assert(Entity.createdOn(now1).createdOn(now2).createdOn == now2);","mixin(TProperty!(\"UUID\", \"lastAccessBy\"));","@property void lastAccessBy(string anUuid)","lastAccessBy(UUID(anUuid));","mixin(TProperty!(\"bool\", \"hasVersions\"));","@property void hasVersions(string newValue)","hasVersions(newValue == \"true\");","mixin(TProperty!(\"bool\", \"hasLanguages\"));","@property void hasLanguages(string newValue)","hasLanguages(newValue == \"true\");","mixin(TProperty!(\"bool\", \"isLocked\"));","@property void isLocked(string newValue)","isLocked(newValue == \"true\");","mixin(TProperty!(\"long\", \"lockedOn\"));","@property void lockedOn(SysTime aTime)","lockedOn(toTimestamp(aTime));","@property void lockedOn(string aTime)","lockedOn(to!long(aTime));","mixin(TProperty!(\"UUID\", \"lockedBy\"));","@property void lockedBy(string anUuid)","lockedBy(UUID(anUuid));","mixin(TProperty!(\"bool\", \"isDeleted\"));","@property void isDeleted(string newValue)","isDeleted(newValue == \"true\");","mixin(TProperty!(\"long\", \"deletedOn\"));","@property void deletedOn(SysTime aTime)","deletedOn(toTimestamp(aTime));","@property void deletedOn(string aTime)","deletedOn(to!long(aTime));","mixin(TProperty!(\"UUID\", \"deletedBy\"));","@property void deletedBy(string anUuid)","deletedBy(UUID(anUuid));","override STRINGAA selector(string[string] parameters)","auto foundId = parameters.get(\"entity_id\", parameters.get(\"id\", \"\"));","auto foundName = parameters.get(\"entity_name\", parameters.get(\"name\", \"\"));","override void readFromStringAA(string[string] reqParameters, bool usePrefix = false)","super.readFromStringAA(reqParameters);",".each!(kv => this[kv.key] = kv.value);","override void readFromRequest(string[string] requestValues, bool usePrefix = true)","super.readFromRequest(requestValues, usePrefix);","foreach (fName; fieldNames)","boolValue.set(requestKey in requestValues ? true : false);","override string opIndex(string key)","super.opIndex(key);","switch (key)","return to!string(etag);","return to!string(createdOn);","return to!string(lastAccessedOn);","return to!string(lockedOn);","return to!string(deletedOn);","return to!string(versionNumber);","string[] keys = key.split(\".\");","return entityValue.value[keys[1 .. $].join(\".\")];","return ElementData.value[keys[1 .. $].join(\".\")];","override void opIndexAssign(string value, string key)","super.opIndexAssign(value, key);","switch (key)","id(value);","etag(value);","name(value);","display(value);","createdOn(value);","createdBy(value);","lastAccessedOn(value);","lastAccessBy(value);","description(value);","isLocked(value);","lockedOn(value);","lockedBy(value);","isDeleted(value);","deletedOn(value);","deletedBy(value);","hasVersions(value);","hasLanguages(value);","versionNumber(value);","versionDisplay(value);","versionMode(value);","versionDescription(value);","string[] keys = key.split(\".\");","entityValue.value[keys[1 .. $].join(\".\")] = value;","ElementData.value[keys[1 .. $].join(\".\")] = value;","override void opIndexAssign(UUID value, string key)","super.opIndexAssign(value, key);","switch (key)","id(value);","createdBy(value);","lastAccessBy(value);","lockedBy(value);","deletedBy(value);","override void opIndexAssign(long value, string key)","super.opIndexAssign(value, key);","switch (key)","createdOn(value);","lastAccessedOn(value);","lockedOn(value);","deletedOn(value);","override void opIndexAssign(bool value, string key)","super.opIndexAssign(value, key);","switch (key)","isLocked(value);","isDeleted(value);","hasVersions(value);","void opIndexAssign(DEntity value, string key)","switch (key)","debug writeln(\"key %s in attributes %s\".format(key, attributes[key].StringData));","DEntity create(Json data)","result.fromJson(data);","DEntity clone()","result.fromJson(toJson);","DEntity clone(Json data)","result.fromJson(data);","targetOfCopy.fromJson(toJson);","DEntity copyFrom(DEntity targetOfCopy)","fromJson(targetOfCopy.toJson);","override void fromJson(Json aJson)","super.fromJson(aJson);","foreach (keyvalue; aJson.byKeyValue)","switch (k)","pool(v.get!string);","id(v.get!string);","etag(v.get!long);","name(v.get!string);","display(v.get!string);","createdOn(v.get!long);","createdBy(v.get!string);","description(v.get!string);","isLocked(v.get!bool);","lockedOn(v.get!long);","lockedBy(v.get!string);","isDeleted(v.get!bool);","deletedOn(v.get!long);","deletedBy(v.get!string);","hasVersions(v.get!bool);","hasLanguages(v.get!bool);","foreach (kv; v.byKeyValue)","parameters(values);","config(v);","versionNumber(v.get!long);","versionDisplay(v.get!string);","versionMode(v.get!string);","versionDescription(v.get!string);","_attributes[k].value(v);","override Json toJson(string[] showFields = null, string[] hideFields = null)","auto result = super.toJson(showFields, hideFields);","auto parameterValues = Json.emptyObject.set(parameters);","result.set(\"registerPath\", registerPath);","result.set(\"id\", id.toString);","result.set(\"name\", name);","result.set(\"display\", display);","result.set(\"createdOn\", createdOn);","result.set(\"createdBy\", createdBy.toString);","result.set(\"lastAccessedOn\", lastAccessedOn);","result.set(\"lastAccessBy\", lastAccessBy.toString);","result.set(\"description\", description);","result.set(\"isLocked\", isLocked);","foreach (kv; parameters.byKeyValue)","result[\"parameters\"] = Json.emptyObject.set(parameters);","void load()","version (test_uim_models)","DEntity save()","version (test_uim_models)","bool removeKey(bool allVersions = false)","auto Entity()","auto Entity(Json json)","return new DEntity(json);","assert(Entity.name(\"entity\").name == \"entity\");","entityValue.value = Entity.name(\"TestEntity\");","entity.values.set(\"entity\", entityValue);","assert(entity.set(\"entity.name\") == \"TestEntity\");","assert(entity.set(\"entity.name\") != \"_\");","entity.set(\"entity.name\", \"newEntityName\");","assert(entity.getString(\"entity.name\") == \"newEntityName\");","entityValue = cast(DEntityData)entity.values[\"entity\"];","assert(entityValue.value.getString(\"name\") == \"newEntityName\");","entity.values.set(\"element\", entityValue);","assert(entity.getString(\"element.name\") == \"TestElement\");","assert(entity.getString(\"element.name\") != \"_\");","entity.set(\"element.name\", \"newElementName\");","assert(entity.getString(\"element.name\") == \"newElementName\");","ElementData = cast(DElementData)entity.values[\"element\"];","assert(Entity.id(randomuuid)","assert(Entity.etag(totimestamp(now))","assert(Entity.name(id.tostring)","assert(Entity.createdon(now)","assert(Entity.lastaccessedon(createdon)","assert(Entity.hasversions(false)","assert(Entity.haslanguages(false)","assert(Entity.config(json.emptyobject)","assert(Entity.values(values)","assert(Entity.versionOn(createdon)","assert(Entity.versionNumber(1l) // allways starts with version 1","assert(Entity.versionBy(createdby);","case \"etag\": return to!string(etag);","case \"createdOn\": return to!string(createdOn);","case \"lastAccessedOn\": return to!string(lastAccessedOn);","case \"lockedOn\": return to!string(lockedOn);","case \"deletedOn\": return to!string(deletedOn);","case \"versionNumber\": return to!string(versionNumber);","case \"versionOn\": return to!string(versionOn);","case \"versionBy\": return to!string(versionBy);"]</td></tr><tr><td>implements:["DElement","IEntity /*"]</td></tr><tr><td>type:class</td></tr><tr><td>library:uim-models</td></tr></table>
                        </div>
                    </div>
                </div>
                <footer class="footer footer-transparent d-print-none">
    <div class="container-xl">
        <div
            class="row text-center align-items-center flex-row-reverse">
            <div class="col-lg-auto ms-lg-auto">
                <ul class="list-inline list-inline-dots mb-0">
                    <li class="list-inline-item"><a
                            href="https://tabler.io/docs"
                            target="_blank"
                            class="link-secondary"
                            rel="noopener">Documentation</a></li>
                    <li class="list-inline-item"><a
                            href="./license.html"
                            class="link-secondary">License</a></li>
                    <li class="list-inline-item"><a
                            href="https://github.com/tabler/tabler"
                            target="_blank"
                            class="link-secondary"
                            rel="noopener">Source code</a></li>
                    <li class="list-inline-item">
                        <a
                            href="https://github.com/sponsors/codecalm"
                            target="_blank"
                            class="link-secondary"
                            rel="noopener">
                            <!-- Download SVG icon from http://tabler-icons.io/i/heart -->
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24" height="24"
                                viewBox="0 0 24 24" fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="icon text-pink icon-filled icon-inline"><path
                                    stroke="none"
                                    d="M0 0h24v24H0z"
                                    fill="none"></path><path
                                    d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"></path></svg>
                            Sponsor
                        </a>
                    </li>
                </ul>
            </div>
            <div class="col-12 col-lg-auto mt-3 mt-lg-0">
                <ul class="list-inline list-inline-dots mb-0">
                    <li class="list-inline-item">
                        Copyright © 2017 - 2024 <a href="." class="link-secondary">UIM framework</a>. All rights reserved.
                    </li>
                    <li class="list-inline-item">
                        <a href="./changelog.html" class="link-secondary" rel="noopener">v24.09.01</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

            </div>
        </div>
        <script src="https://uimsolutions.github.io/uim/js/tabler.min.js"></script>
    </body>
</html>
