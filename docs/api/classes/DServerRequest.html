<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content />
        <meta name="author" content />
        <title>Class DServerRequest - uim framework</title>
        <link rel="icon" type="image/x-icon"
            href="https://uimsolutions.github.io/uim/assets/favicon.ico" />
        <link href="https://uimsolutions.github.io/uim/css/tabler.min.css" rel="stylesheet" />
    </head>
    <body>
        <div class="page">
            <header class="navbar navbar-expand-md d-print-none">
    <div class="container-xl">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbar-menu" aria-controls="navbar-menu"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div
            class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3">
            <a href=".">UIM FRAMEWORK
            </a>
        </div>
        <div class="navbar-nav flex-row order-md-last">
            <div class="nav-item d-none d-md-flex me-3">
                <div class="btn-list">
                    <a href="https://github.com/UIMSolutions/uim" class="btn"
                        target="_blank" rel="noreferrer">
                        Source code
                    </a>
                    <a href="https://www.patreon.com/sicherheitsschmiede/posts"
                        class="btn"
                        target="_blank" rel="noreferrer">
                        Sponsor
                    </a>
                </div>
            </div>
        </div>
    </div>
</header>
<header class="navbar-expand-md">
    <div class="collapse navbar-collapse" id="navbar-menu">
        <div class="navbar">
            <div class="container-xl">
                <div class="row flex-fill align-items-center">
                    <div class="col">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="https://uimsolutions.github.io/uim">
                                    Home
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                    href="https://uimsolutions.github.io/uim/api/interfaces">Interfaces</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                    href="https://uimsolutions.github.io/uim//api/classes">Classes</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                    href="https://uimsolutions.github.io/uim/api/libraries">Libraries</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                    href="https://uimsolutions.github.io/uim/api/packages">Packages</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
            <div class="page-wrapper">
                <div class="page-header">
                    <div class="row align-items-center mw-100">
                        <div class="col">
                            <div class="container-xl">
                                <div class="page-pretitle">
                                    Class
                                </div>
                                <h2 class="page-title">
                                    DServerRequest
                                </h2>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="page-body">
                    <div class="col">
                        <div class="container-xl">
                            <table><tr><td>origin:C:\Users\ONS\PROJECTS2023\uim\http\uim\http\classes\requests\serverrequest.d</td></tr><tr><td>isFinal:false</td></tr><tr><td>package:uim.http.classes.requests</td></tr><tr><td>visibility:public</td></tr><tr><td>name:DServerRequest</td></tr><tr><td>isAbstract:false</td></tr><tr><td>namespace:uim.http.classes.requests.serverrequest</td></tr><tr><td>header:class DServerRequest : UIMObject</td></tr><tr><td>methods:["}","}","}","}","}","// Array of cookie data.","// Array of environment data.","// Base URL path.","// Array of query string arguments","// Array of parameters parsed from the URL.","/**","* Get all the server environment parameters.","*","* Read all of the 'environment' or `server' data that was","* used to create this request.","*/","}","/**","* Get all the query parameters in accordance to the PSR-7 specifications. To read specific query values","* use the alternative getQuery() method.","*/","}","// webroot path segment for the request.","/**","* Whether to trust HTTP_X headers set by most load balancers.","* Only set to true if your application runs behind load balancers/proxies","* that you control.","*/","// Trusted proxies list","/**","* The built in detectors used with `is()` can be modified with `addDetector()`.","*","* There are several ways to specify a detector, see \\UIM\\Http\\ServerRequest.addDetector() for the","* various formats and ways to define detectors.","*/","/**","* Instance cache for results of is(something) calls","*","* @var array<string, bool>","*/","/**","* Array of POST data. Will contain form data as well as uploaded files.","* In PUT/PATCH/DELETE requests this property will contain the form-urlencoded","* data.","*","* @var object|array|null","*/","/**","* Request body stream. Contains D://input unless `input` constructor option is used.","*","* @var \\Psr\\Http\\Message\\IStream","*/","/**","* Uri instance","*","* @var \\Psr\\Http\\Message\\IUri","*/","/**","* Instance of a Session object relative to this request","*","* @var \\UIM\\Http\\Session","*/","/**","* Instance of a FlashMessage object relative to this request","*","* @var \\UIM\\Http\\FlashMessage","*/","/**","* Store the additional attributes attached to the request.","*/","/**","* A list of properties that emulated by the PSR7 attribute methods.","*/","/**","* Array of Psr\\Http\\Message\\IUploadedFile objects.","*","* @var array","*/","/**","* The HTTP protocol version used.","*/","/**","* The request target if overridden","*/","/**","* Create a new request object.","*","* You can supply the data as either an array or as a string. If you use","* a string you can only supply the URL for the request. Using an array will","* let you provide the following keys:","*","* - `post` POST data or non query string data","* - `query` Additional data from the query string.","* - `files` Uploaded files in a normalized structure, with each leaf an instance of IUploadedFile.","* - `cookies` Cookies for this request.","* - `environment` _SERVER and _ENV data.","* - `url` The URL without the base path for the request.","* - `uri` The PSR7 IUri object. If null, one will be created from `url` or `environment`.","* - `base` The base URL for the request.","* - `webroot` The webroot directory for the request.","* - `input` The data that would come from D://input this is useful for simulating","* requests with put, patch or delete data.","* - `session` An instance of a Session object","*/","}","// Process the config/settings data into properties.","}","}","}","} else","}","}","} else","}","}","}","/**","* Set environment vars based on `url` option to facilitate IUri instance generation.","* `query` option is also updated based on URL`s querystring.","*/","}","}","}","// Get the content type used in this request.","}","// Returns the instance of the Session object for this request","}","// Returns the instance of the FlashMessage object for this request","}","// Get the IP the client is using, or says they are using.","}","}","}","} else if (_trustProxy && getEnvironmentData(\"HTTP_CLIENT_IP\"))","} else","}","}","// register trusted proxies","}","// Get trusted proxies","}","/**","* Returns the referer that referred this request.","* Params:","* bool local Attempt to return a local address.","* Local addresses do not contain hostnames.","*/","}","}","}","}","}","// Missing method handler, handles wrapping older style isAjax() type methods","/* if (name.startWith(\"is\"))","} */","}","/**","* Check whether a Request is a certain type.","*","* Uses the built-in detection rules as well as additional rules","* defined with @link \\UIM\\Http\\ServerRequest.addDetector()}. Any detector can be called","* as `is(type)` or `isType()`.","* Params:","* string[]|string atype The type of request you want to check. If an array","* this method will return true if the request matches any type.","*/","/* bool is(string[] atype, Json[string] arguments)","}","}","}","}","}","} */","// Clears the instance detector cache, used by the is() function","}","// Worker for the is() function","/* if (cast(DClosure)detect)","} */","}","}","}","}","}","/**","* Detects if a specific accept header is present.","* Params:","* Json[string] detect Detector options array.","*/","// Some detectors overlap with the default browser Accept header","// For these types we use an exclude list to refine our content type","// detection.","}","}","}","}","// Detects if a specific header is present.","/* if (cast(DClosure)aValue)","} */","}","}","}","// Detects if a specific request parameter is present.","}","/* if (detect.hasKey(\"options\"))","} */","}","/**","* Detects if a specific environment variable is present.","* Params:","* Json[string] detect Detector options array.","*/","}","}","}","}","}","/**","* Check that a request matches all the given types.","*","* Allows you to test multiple types and union the results.","* See Request.is() for how to add additional types and the","* built-in types.","*/","/* if (!is(type))","} */","}","}","/**","* Add a new detector to the list of detectors that a request can use.","* There are several different types of detectors that can be set.","*","* ### Callback comparison","*","* Callback detectors allow you to provide a closure to handle the check.","* The closure will receive the request object as its only parameter.","*","* ```","* addDetector(\"custom\", auto (request)  //Return a boolean });","* ```","*","* ### Environment value comparison","*","* An environment value comparison, compares a value fetched from `enviroment()` to a known value","* the environment value is equality checked against the provided value.","*","* ```","* addDetector(\"post\", [\"env\": 'REQUEST_METHOD\", \"value\": 'POST\"]);","* ```","*","* ### Request parameter comparison","*","* Allows for custom detectors on the request parameters.","*","* ```","* addDetector(\"admin\", [\"param\": 'prefix\", \"value\": 'admin\"]);","* ```","*","* ### Accept comparison","*","* Allows for detector to compare against Accept header value.","*","* ```","* addDetector(\"csv\", [\"accept\": 'text/csv\"]);","* ```","*","* ### Header comparison","*","* Allows for one or more headers to be compared.","*","* ```","* addDetector(\"fancy\", [\"header\": [\"X-Fancy\": 1]);","* ```","*","* The `param`, `env` and comparison types allow the following","* value comparison options:","*","* ### Pattern value comparison","*","* Pattern value comparison allows you to compare a value fetched from `enviroment()` to a regular expression.","*","* ```","* addDetector(\"iphone\", [\"env\": 'HTTP_USER_AGENT\", \"pattern\": '/iPhone/i\"]);","* ```","*","* ### Option based comparison","*","* Option based comparisons use a list of options to create a regular expression. Subsequent calls","* to add an already defined options detector will merge the options.","*","* ```","* addDetector(\"mobile\", [\"env\": 'HTTP_USER_AGENT\", \"options\": [\"Fennec\"]]);","* ```","*","* You can also make compare against multiple values","* using the `options` key. This is useful when you want to check","* if a request value is in a list of options.","*","* `addDetector(\"extension\", [\"param\": '_ext\", \"options\": [\"pdf\", \"csv\"]]`","*/","}","/** @var array data */","}","}","// Normalize a header name into the SERVER version.","}","/**","* Get all headers in the request.","*","* Returns an associative array where the header names are","* the keys and the values are a list of header values.","*","* While header names are not case-sensitive, getHeaders() will normalize","* the headers.","*/","}","}","}","});","}","/**","* Check if a header is set in the request.","* Params:","* string aName The header you want to get (case-insensitive)","*/","}","/**","* Get a single header from the request.","*","* Return the header value as an array. If the header","* is not present an empty array will be returned.","*/","}","// Get a single header as a string from the request.","}","// Get a modified request with the provided header.","}","/**","* Get a modified request with the provided header.","*","* Existing header values will be retained. The provided value","* will be appended into the existing values.","* Params:","* string aName The header name.","*/","}","}","/**","* Get a modified request without a provided header.","* Params:","* string aName The header name to remove.","*/","}","/**","* Get the HTTP method used for this request.","* There are a few ways to specify a method.","*","* - If your client supports it you can use native HTTP methods.","* - You can set the HTTP-X-Method-Override header.","* - You can submit an input with the name `_method`","*","* Any of these 3 approaches can be used to set the HTTP method used","* by UIM internally, and will effect the result of this method.","*/","}","/**","* Update the request method and get a new instance.","*/","}","}","/**","* Update the query string data and get a new instance.","* Params:","* Json[string] aQuery The query string data to use","*/","}","/**","* Get the host that the request was handled on.","*/","}","}","/**","* Get the port the request was handled on.","*/","}","}","/**","* Get the current url scheme used for the request.","* e.g. 'http\", or 'https'","*/","}","/**","* Get the domain name and include tldLength segments of the tld.","* Params:","* int tldLength Number of segments your tld contains. For example: `example.com` contains 1 tld.","* While `example.co.uk` contains 2.","*/","}","}","/**","* Get the subdomains for a host.","* Params:","* int tldLength Number of segments your tld contains. For example: `example.com` contains 1 tld.","* While `example.co.uk` contains 2.","*/","}","}","/**","* Find out which content types the client accepts or check if they accept a","* particular type of content.","*","* #### Get all types:","*","* ```","* _request.accepts();","* ```","*","* #### Check for a single type:","*","* ```","* _request.accepts(\"application/Json\");","* ```","*","* This method will order the returned content types by the preference values indicated","* by the client.","* Params:","* string type The content type to check for. Leave null to get all types a client accepts.","*/","}","}","/**","* Get the languages accepted by the client, or check if a specific language is accepted.","*","* Get the list of accepted languages:","*","* ```request.acceptLanguage();```","*","* Check if a specific language is accepted:","*","* ```request.acceptLanguage(\"es-es\");```","*/","}","/**","* Read a specific query value or dotted path.","*","* Developers are encouraged to use queryArguments() if they need the whole query array,","* as it is PSR-7 compliant, and this method is not. Using Hash.get() you can also get single params.","*","* ### PSR-7 Alternative","*","* ```","* aValue = Hash.get(request.queryArguments(), \"Post.id\");","* ```","*/","}","}","/**","* Provides a safe accessor for request data. Allows","* you to use Hash.get() compatible paths.","*","* ### Reading values.","*","* ```","* get all data","* request.getData();","*","* Read a specific field.","* request.getData(\"Post.title\");","*","* With a default value.","* request.getData(\"Post.not there\", \"default value\");","* ```","*","* When reading values you will get `null` for keys/values that do not exist.","*","* Developers are encouraged to use getParsedBody() if they need the whole data array,","* as it is PSR-7 compliant, and this method is not. Using Hash.get() you can also get single params.","*","* ### PSR-7 Alternative","*","* ```","* aValue = Hash.get(request.getParsedBody(), \"Post.id\");","* ```","*/","}","}","// Read cookie data from the request`s cookie data.","}","}","/**","* Get a cookie collection based on the request`s cookies","*","* The CookieCollection lets you interact with request cookies using","* `\\UIM\\Http\\Cookie\\Cookie` objects and can make converting request cookies","* into response cookies easier.","*","* This method will create a new cookie collection each time it is called.","* This is an optimization that allows fewer objects to be allocated until","* the more complex CookieCollection is needed. In general you should prefer","* `getCookie()` and `getCookieParams()` over this method. Using a CookieCollection","* is ideal if your cookies contain complex Json encoded data.","*/","}","/**","* Replace the cookies in the request with those contained in","* the provided CookieCollection.","*/","}","}","// Get all the cookie data from the request.","}","// Replace the cookies and get a new request instance.","}","/**","* Get the parsed request body data.","*","* If the request Content-Type is either application/x-www-form-urlencoded","* or multipart/form-data, and the request method is POST, this will be the","* post data. For other content types, it may be the deserialized request","* body.","*/","/* object|array|null */ auto getParsedBody()","}","/**","* Update the parsed body and get a new instance.","* Params:","* object|array|null someData The deserialized body data. This will","*   typically be in an array or object.","*/","}","// Retrieves the HTTP protocol version as a string.","}","// Lazily populate this data as it is generally not used.","}","}","/**","* Return an instance with the specified HTTP protocol version.","*","* The version string MUST contain only the HTTP version number (e.g.,","* \"1.1\", \"1.0\").","* Params:","* string aversion HTTP protocol version","*/","}","}","/**","* Get a value from the request`s environment data.","* Fallback to using enviroment() if the key is not set in the environment property.","*/","}","}","/**","* Update the request with a new environment data element.","*","* Returns an updated request object. This method returns","* a *new* request object and does not mutate the request in-place.","*/","}","/**","* Allow only certain HTTP request methods, if the request method does not match","* a 405 error will be shown and the required \"Allow\" response header will be set.","*","* Example:","*","* _request.allowMethod(\"post\");","* or","* _request.allowMethod([\"post\", \"delete\"]);","*","* If the request would be GET, response header \"Allow: POST, DELETE\" will be set","* and a 405 error will be returned.","* Params:","* string[]|string httpMethods Allowed HTTP request methods.","*/","}","}","}","/**","* Update the request with a new request data element.","*","* Returns an updated request object. This method returns","* a *new* request object and does not mutate the request in-place.","*","* Use `withParsedBody()` if you need to replace the all request data.","*/","}","}","/**","* Update the request removing a data element.","*","* Returns an updated request object. This method returns","* a *new* request object and does not mutate the request in-place.","* Params:","* string aName The dot separated path to remove.","*/","}","}","/**","* Update the request with a new routing parameter","*","* Returns an updated request object. This method returns","* a *new* request object and does not mutate the request in-place.","*/","}","// Safely access the values in _params.","}","// Return an instance with the specified request attribute.","} else","}","}","/**","* Return an instance without the specified request attribute.","* Params:","* string aName The attribute name.","*/","}","}","// Read an attribute from the request, or get the default","}","}","}","}","/**","* Get all the attributes in the request.","*","* This will include the params, webroot, base, and here attributes that UIM provides.","*/","}","/**","* Get the uploaded file from a dotted path.","* Params:","* string aPath The dot separated path to the file you want.","*/","}","}","/**","* Get the array of uploaded files from the request.","*/","}","/**","* Update the request replacing the files, and creating a new instance.","* Params:","* Json[string] uploadedFiles An array of uploaded file objects.","*/","}","/**","* Recursively validate uploaded file data.","* Params:","* Json[string] uploadedFiles The new files array to validate.","*/","}","}","}","}","// Gets the body of the message.","}","/**","* Return an instance with the specified message body.","* Params:","* \\Psr\\Http\\Message\\IStream body The new request body","*/","}","// Retrieves the URI instance.","}","/**","* Return an instance with the specified uri","*","* *Warning* Replacing the Uri will not update the `base`, `webroot`,","* and `url` attributes.","* Params:","* \\Psr\\Http\\Message\\IUri anUri The new request uri","*/","}","}","}","}","/**","* Create a new instance with a specific request-target.","*","* You can use this method to overwrite the request target that is","* inferred from the request`s Uri. This also lets you change the request","* target`s form to an absolute-form, authority-form or asterisk-form","*/","}","/**","* Retrieves the request`s target.","*","* Retrieves the message`s request-target either as it was requested,","* or as set with `withRequestTarget()`. By default this will return the","* application relative path without base directory, and the query string","* defined in the SERVER environment.","*/","}","}","}","// Get the path of current request.","}","}","}"]</td></tr><tr><td>implements:["UIMObject"]</td></tr><tr><td>type:class</td></tr><tr><td>library:uim-http</td></tr></table>
                        </div>
                    </div>
                </div>
                <footer class="footer footer-transparent d-print-none">
    <div class="container-xl">
        <div
            class="row text-center align-items-center flex-row-reverse">
            <div class="col-lg-auto ms-lg-auto">
                <ul class="list-inline list-inline-dots mb-0">
                    <li class="list-inline-item"><a
                            href="https://tabler.io/docs"
                            target="_blank"
                            class="link-secondary"
                            rel="noopener">Documentation</a></li>
                    <li class="list-inline-item"><a
                            href="./license.html"
                            class="link-secondary">License</a></li>
                    <li class="list-inline-item"><a
                            href="https://github.com/tabler/tabler"
                            target="_blank"
                            class="link-secondary"
                            rel="noopener">Source code</a></li>
                    <li class="list-inline-item">
                        <a
                            href="https://github.com/sponsors/codecalm"
                            target="_blank"
                            class="link-secondary"
                            rel="noopener">
                            <!-- Download SVG icon from http://tabler-icons.io/i/heart -->
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24" height="24"
                                viewBox="0 0 24 24" fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="icon text-pink icon-filled icon-inline"><path
                                    stroke="none"
                                    d="M0 0h24v24H0z"
                                    fill="none"></path><path
                                    d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"></path></svg>
                            Sponsor
                        </a>
                    </li>
                </ul>
            </div>
            <div class="col-12 col-lg-auto mt-3 mt-lg-0">
                <ul class="list-inline list-inline-dots mb-0">
                    <li class="list-inline-item">
                        Copyright © 2017 - 2024 <a href="." class="link-secondary">UIM framework</a>. All rights reserved.
                    </li>
                    <li class="list-inline-item">
                        <a href="./changelog.html" class="link-secondary" rel="noopener">v24.09.01</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

            </div>
        </div>
        <script src="https://uimsolutions.github.io/uim/js/tabler.min.js"></script>
    </body>
</html>
