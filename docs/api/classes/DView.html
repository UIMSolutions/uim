<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content />
        <meta name="author" content />
        <title>Class DView - uim framework</title>
        <link rel="icon" type="image/x-icon"
            href="https://uimsolutions.github.io/uim/assets/favicon.ico" />
        <link href="https://uimsolutions.github.io/uim/css/tabler.min.css" rel="stylesheet" />
    </head>
    <body>
        <div class="page">
            <header class="navbar navbar-expand-md d-print-none">
    <div class="container-xl">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbar-menu" aria-controls="navbar-menu"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div
            class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3">
            <a href=".">UIM FRAMEWORK
            </a>
        </div>
        <div class="navbar-nav flex-row order-md-last">
            <div class="nav-item d-none d-md-flex me-3">
                <div class="btn-list">
                    <a href="https://github.com/UIMSolutions/uim" class="btn"
                        target="_blank" rel="noreferrer">
                        Source code
                    </a>
                    <a href="https://www.patreon.com/sicherheitsschmiede/posts"
                        class="btn"
                        target="_blank" rel="noreferrer">
                        Sponsor
                    </a>
                </div>
            </div>
        </div>
    </div>
</header>
<header class="navbar-expand-md">
    <div class="collapse navbar-collapse" id="navbar-menu">
        <div class="navbar">
            <div class="container-xl">
                <div class="row flex-fill align-items-center">
                    <div class="col">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="https://uimsolutions.github.io/uim">
                                    Home
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                    href="https://uimsolutions.github.io/uim/api/interfaces">Interfaces</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                    href="https://uimsolutions.github.io/uim//api/classes">Classes</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                    href="https://uimsolutions.github.io/uim/api/libraries">Libraries</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                    href="https://uimsolutions.github.io/uim/api/packages">Packages</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
            <div class="page-wrapper">
                <div class="page-header">
                    <div class="row align-items-center mw-100">
                        <div class="col">
                            <div class="container-xl">
                                <div class="page-pretitle">
                                    Class
                                </div>
                                <h2 class="page-title">
                                    DView
                                </h2>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="page-body">
                    <div class="col">
                        <div class="container-xl">
                            <table><tr><td>origin:C:\Users\ONS\PROJECTS2023\uim\views\uim\views\classes\views\view.d</td></tr><tr><td>isFinal:false</td></tr><tr><td>package:uim.views.classes.views</td></tr><tr><td>visibility:public</td></tr><tr><td>name:DView</td></tr><tr><td>isAbstract:false</td></tr><tr><td>namespace:uim.views.classes.views.view</td></tr><tr><td>header:class DView : UIMObject, IView</td></tr><tr><td>methods:["// @use \\UIM\\Event\\EventDispatcherTrait<\\UIM\\View\\View>","// mixin TLog;","}","}","// The name of the plugin.","// Name of the controller that created the View if any.","/**","* Currently rendering an element. Used for finding parent fragments","* for elements.","*/","// Retrieve the current template type","}","// File extension. Defaults to \".d\".","// ViewBlock instance.","// Get the names of all the existing blocks.","}","// A configuration array for helpers to be loaded.","// The name of the subfolder containing templates for this View.","// #region consts","// Constant for view file type \"element\"","// Constant for view file type \"layout\"","// Constant for type used for App.path().","// Constant for folder name containing files for overriding plugin templates.","// #endregion consts","/**","* The name of the template file to render. The name specified","* is the filename in `templates/<SubFolder>/` without the .d extension.","*/","/**","* The name of the layout file to render the template inside of. The name specified","* is the filename of the layout in `templates/layout/` without the .d extension.","*/","// The name of the layouts subfolder containing layouts for this View.","/**","* The magic \"match-all\" content type that views can use to","* behave as a fallback during content-type negotiation.","*/","/**","* Turns on or off UIM\"s conventional mode of applying layout files. On by default.","* Setting to off means that layouts will not be automatically applied to rendered templates.","*/","// An array of variables","/**","* Sub-directory for this template file. This is often used for extension based routing.","* Eg. With an `xml` extension, mysubDir would be `xml/`","*/","// The view theme to use.","/**","* The Cache configuration View will use to store cached elements. Changing this will change","* the default configuration elements are stored under. You can also choose a cache config","* per element.","*/","/**","* An instance of a \\UIM\\Http\\ServerRequest object that contains information about the current request.","* This object contains all the information about a request and several methods for reading","* additional information about the request.","*/","// protected IServerRequest _request;","// Reference to the Response object","// protected DResponse _response;","// #region contentType","// Set the response content-type based on the view\"s contentType()","/*","}","}","}","// Mime-type this view class renders as.","}","// #endregion contentType","// Holds an array of paths.","/*","}","// Helpers collection","*/","// List of variables to collect from the associated controller.","// Holds an array of plugin paths.","// TODO protected array<string[] _pathsForPlugin = null;","// The names of views and their parents used with View.extend();","// The currently rendering view file. Used for resolving parent files.","// Content stack, used for nested templates that all use View.extend();","// ViewBlock class.","/* this(","// Set the event manager before accessing the helper registry below","// to ensure that helpers are registered as listeners with the manager when loaded.","}","/* _myvar} = viewoptions.get(myvar); * /","}","}","}","// _request = serverRequest ? serverRequest : (Router.getRequest() ?: new DServerRequest([\"base\": \"\", \"url\": \"\", \"webroot\": \"/\"]));","/* _response = _response ?: new DResponse();","} */","// Gets the request instance.","/* ServerRequest getRequest()","} */","/**","* Sets the request objects and configures a number of controller properties","* based on the contents of the request. The properties that get set are:","*","* - _request - To the _request parameter","* - _plugin - To the value returned by _request.getParam(\"plugin\")","* Params:","* \\UIM\\Http\\ServerRequest _request Request instance.","*/","/* void setRequest(DServerRequest _request)","} */","// Gets the response instance.","/* Response getResponse()","} */","// Sets the response instance.","/* auto setResponse(Response _response)","} */","// Get path for templates files.","}","// Set path for templates files.","}","/**","* Turns on or off UIM\"s conventional mode of applying layout files.","* On by default. Setting to off means that layouts will not be automatically applied to rendered views.","*/","}","/**","* Turns off UIM\"s conventional mode of applying layout files.","* Layouts will not be automatically applied to rendered views.","*/","}","// Get the current view theme.","}","// Set the view theme to use.","}","// Get the name of the template file to render.","}","// Set the name of the template file to render.","}","/**","* Get the name of the layout file to render the template inside of.","* The name specified is the filename of the layout in `templates/layout/`","* without the .d extension.","*/","}","/**","* Set the name of the layout file to render the template inside of.","* The name specified is the filename of the layout in `templates/layout/`","* without the .d extension.","*/","}","/**","* Renders a piece of UIM with provided parameters and returns HTML, XML, or any other string.","*","* This realizes the concept of Elements, (or \"partial layouts\") and the params array is used to send","* data to be used in the element. Elements can be cached improving performance by using the `cache` option.","* Params:","* string templatefilename Name of template file in the `templates/element/` folder,","* or `_plugin.template` to use the template element from _plugin. If the element","* is not found in the plugin, the normal view path cascade will be searched.","*/","/* if (options.hasKey(\"cache\"))","}","/* return _cache(void () use (filepath, data, options)","}, options.get(\"cache\")); * /","}","}","} */","/*  [_plugin, myelementName] = _pluginSplit(templatefilename, _pluginCheck);","}","/**","* Create a cached block of view logic.","*","* This allows you to cache a block of view output into the cache","* defined in `elementCache`.","*","* This method will attempt to read the cache first. If the cache","* is empty, the myblock will be run and the output stored.","* Params:","* callable myblock The block of code that you want to cache the output of.","*/","/* string cache(callable myblock, Json[string] options = null)","}","}","} catch (Throwable exception)","}","}","} */","/**","* Checks if an element exists","* Params:","* string templatefilename Name of template file in the `templates/element/` folder,","* or `_plugin.template` to check the template element from _plugin. If the element","* is not found in the plugin, the normal view path cascade will be searched.","*/","/* return /* (bool) * /_getElementFileName(templatefilename); */","}","/**","* Renders view for given template file and layout.","*","* Render triggers helper callbacks, which are fired before and after the template are rendered,","* as well as before and after the layout. The helper callbacks are called:","*","* - `beforeRender`","* - `afterRender`","* - `beforeLayout`","* - `afterLayout`","*","* If View.myautoLayout is set to `false`, the template will be returned bare.","*","* Template and layout names can point to plugin templates or layouts. Using the `Plugin.template` syntax","* a plugin template/layout/ can be used instead of the app ones. If the chosen plugin is not found","* the template will be located along the regular view path cascade.","*/","/* if (layoutName == false)","} else if (layoutName !is null)","} */","/* mytemplateFileName = _getTemplateFileName(templateName);","}","}","}","}","}","/**","* Renders a layout. Returns output from _render().","*","* Several variables are created for use in layout.","*/","/* auto layoutFilename = _getLayoutFileName(mylaylayoutNameout);","} */","// _dispatchEvent(\"View.beforeLayout\", [layoutFilename]);","/* string mytitle = _blocks.get(\"title\");","}","/*  _blocks.set(\"content\", _render(layoutFilename));","}","// Returns a list of variables available in the current View context","}","// Returns the contents of the given View variable.","}","// Saves a variable or an associative array of variables for use inside a template.","/* if (views.isArray)","/** @var array|false data Coerce Dstan to accept failure case * /","}","} else","}","} else","}","}","/**","* Start capturing output for a \"block\"","*","* You can use start on a block multiple times to","* append or prepend content in a capture mode.","*","* ```","* Append content to an existing block.","* _start(\"content\");","* writeln(_fetch(\"content\");","* writeln(\"Some new content\";","* _end();","*","* Prepend content to an existing block","* _start(\"content\");","* writeln(\"Some new content\";","* writeln(_fetch(\"content\");","* _end();","* ```","* Params:","* string views The name of the block to capture for.","*/","// _blocks.start(blockName);","}","/**","* Append to an existing or new block.","* Appending to a new block will create the block.","*/","// _blocks.concat(blockName, myvalue);","}","/**","* Prepend to an existing or new block.","* Prepending to a new block will create the block.","*/","//  _blocks.concat(blockName, blockContent, ViewBlock.PREPEND);","}","/**","* Set the content for a block. This will overwrite any","* existing content.","*/","//  _blocks.set(blockName, value);","}","/**","* Reset the content for a block. This will overwrite any","* existing content.","*/","// _assign(blockName, \"\");","}","/**","* Fetch the content for a block. If a block is","* empty or undefined \"\" will be returned.","*/","// return _blocks.get(blockName, defaultText);","}","// End a capturing block. The compliment to View.start()","// _blocks.end();","}","// Check if a block exists","}","/**","* Provides template or element extension/inheritance. Templates can : a","* parent template and populate blocks in the parent template.","*/","/*  switch (type)","// parentName = _getElementFileName(views);","/* [_plugin, views] = _pluginSplit(views);","*//* throw new DLogicException(","}","}","// throw new DLogicException(\"You cannot have templates extend themselves.\");","} */","/* if (_parents.hasKey(parentName) && _parents[parentName] == _current)","// throw new DLogicException(\"You cannot have templates extend in a loop.\");","} */","// _parents[_current] = parentName;","}","// Magic accessor for helpers.","/* Helper __get(string attributeName)","} */","// Interact with the HelperRegistry to load all the helpers.","/* auto loadHelpers()","}","} */","/**","* Renders and returns output for given template filename with its","* array of data. Handles parent/extended templates.","*/","/* if (data.isEmpty)","}","} */","/* if (_parents.hasKey(templateFilename))","} */","/* myremainingBlocks = count(_blocks.unclosed());","}","}","// Sandbox method to evaluate a template / view script in.","/* extract(dataForView);","/* try","// Avoiding templateFilename here due to collision with extract() vars.","// TODO include func_get_arg(0);","} catch (Throwable exception)","}","} * /","}","// Get the helper registry in use by this View class.","// return _helpers ? _helpers : new DViewHelperRegistry(this);","}","// Adds a helper from within `initialize()` method.","/* [_plugin, views] = pluginSplit(helper);","}","}","/**","* Loads a helper. Delegates to the `HelperRegistry.load()` to load the helper.","* You should use `addHelper()` instead of this method from the `initialize()` hook of `AppView` or other custom View classes.","*/","/* Helper loadHelper(string helperName, Json[string] settingsForHelper = null)","} */","// Set sub-directory for this template files.","}","// Get sub-directory for this template files.","}","// Set The cache configuration View will use to store cached elements","}","/**","* Returns filename of given action\"s template file as a string.","* CamelCased action names will be under_scored by default.","* This means that you can have LongActionNames that refer to","* long_action_names.d templates. You can change the inflection rule by","* overriding _inflectTemplateFileName.","* Params:","* string views Controller action to find template filename for","*/","}","// Check if templatePath already terminates with subDir","}","}","/* if (views.isEmpty)","}","/* if (!views.has(DIRECTORY_SEPARATOR) && views != \"\" && !views.startWith(\".\"))","} else if (views.has(DIRECTORY_SEPARATOR))","} else if (!_plugin || _templatePath != _name)","} else","}","}","}","}","}","// Change the name of a view template file into underscored format.","}","/**","* Check that a view file path does not go outside of the defined template paths.","*","* Only paths that contain `..` will be checked, as they are the ones most likely to","* have the ability to resolve to files outside of the template paths.","*/","/* if (!filepath.contains(\"..\"))","}","}","}","/**","* Splits a dot syntax plugin name into its plugin and filename.","* If views does not have a dot, then index 0 will be null.","* It checks if the plugin is loaded, else filename will stay unchanged for filenames containing dot","*/","/* auto pluginSplit(string pluginName, bool isFallback = true)","}","}","} */","// Returns layout filename for this template as a string.","}","}","/* [_plugin, views] = _pluginSplit(views);","}","}","}","// Get an iterator for layout paths.","/* protected DGenerator getLayoutPaths(string pluginName)","}","/* yield path ~ mylayoutPath; * /","}","}","} */","// Finds an element filename, returns false on failure.","/* [_plugin, elementname] = _pluginSplit(elementname, shouldCheckPlugin);","}","} */","}","// Get an iterator for element paths.","/* protected DGenerator getElementPaths(string pluginName)","// yield path ~ mysubdir ~ DIRECTORY_SEPARATOR;","}","}","} */","/**","* Find all sub templates path, based on basePath","* If a prefix is defined in the current request, this method will prepend","* the prefixed template path to the basePath, cascading up in case the prefix","* is nested.","* This is essentially used to find prefixed template paths for elements","* and layouts.","*/","/* string[] paths = [basePath];","}","}","}","// Return all possible paths to find view files in order","/* if (isCached)","}","}","}","}","} */","/*         if (!_theme.isEmpty)","}","}","}","}","// Generate the cache configuration options for an element.","/* if (options.hasKey(\"cache.key\"), options.get(\"cache.config\"))","/** @psalm-var arraykey:string, config:string} mycache * /","}","/* auto myelementKey = str_replace([\"\\\\\", \"/\"], \"_\", elementName);","}","}","/**","* Renders an element and fires the before and afterRender callbacks for it","* and writes to the cache if a cache is used","*/","/* auto mycurrent = _current;","}","}","}","}"]</td></tr><tr><td>implements:["UIMObject","IView"]</td></tr><tr><td>type:class</td></tr><tr><td>library:uim-views</td></tr></table>
                        </div>
                    </div>
                </div>
                <footer class="footer footer-transparent d-print-none">
    <div class="container-xl">
        <div
            class="row text-center align-items-center flex-row-reverse">
            <div class="col-lg-auto ms-lg-auto">
                <ul class="list-inline list-inline-dots mb-0">
                    <li class="list-inline-item"><a
                            href="https://tabler.io/docs"
                            target="_blank"
                            class="link-secondary"
                            rel="noopener">Documentation</a></li>
                    <li class="list-inline-item"><a
                            href="./license.html"
                            class="link-secondary">License</a></li>
                    <li class="list-inline-item"><a
                            href="https://github.com/tabler/tabler"
                            target="_blank"
                            class="link-secondary"
                            rel="noopener">Source code</a></li>
                    <li class="list-inline-item">
                        <a
                            href="https://github.com/sponsors/codecalm"
                            target="_blank"
                            class="link-secondary"
                            rel="noopener">
                            <!-- Download SVG icon from http://tabler-icons.io/i/heart -->
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24" height="24"
                                viewBox="0 0 24 24" fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="icon text-pink icon-filled icon-inline"><path
                                    stroke="none"
                                    d="M0 0h24v24H0z"
                                    fill="none"></path><path
                                    d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"></path></svg>
                            Sponsor
                        </a>
                    </li>
                </ul>
            </div>
            <div class="col-12 col-lg-auto mt-3 mt-lg-0">
                <ul class="list-inline list-inline-dots mb-0">
                    <li class="list-inline-item">
                        Copyright © 2017 - 2024 <a href="." class="link-secondary">UIM framework</a>. All rights reserved.
                    </li>
                    <li class="list-inline-item">
                        <a href="./changelog.html" class="link-secondary" rel="noopener">v24.09.01</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

            </div>
        </div>
        <script src="https://uimsolutions.github.io/uim/js/tabler.min.js"></script>
    </body>
</html>
