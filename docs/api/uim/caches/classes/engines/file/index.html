<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Modern Business - uim Framework</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="https://uimsolutions.github.io/uim/assets/favicon.ico" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="https://uimsolutions.github.io/uim/css/styles.css" rel="stylesheet" />
    </head>
    <body class="d-flex flex-column">
        <main class="flex-shrink-0">
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container px-5">
        <a class="navbar-brand" href="index.html">uim</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
                <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
                <li class="nav-item"><a class="nav-link" href="faq.html">FAQ</a></li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdownBlog" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Packages</a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownBlog">
                        <li><a class="dropdown-item" href="blog-home.html">Blog Home</a></li>
                        <li><a class="dropdown-item" href="blog-post.html">Blog Post</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdownBlog" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Blog</a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownBlog">
                        <li><a class="dropdown-item" href="blog-home.html">Blog Home</a></li>
                        <li><a class="dropdown-item" href="blog-post.html">Blog Post</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdownPortfolio" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Portfolio</a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownPortfolio">
                        <li><a class="dropdown-item" href="portfolio-overview.html">Portfolio Overview</a></li>
                        <li><a class="dropdown-item" href="portfolio-item.html">Portfolio Item</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>	

            <!-- Header-->
            <header class="py-5">
                <div class="container px-5">
                    <div class="row justify-content-center">
                        <div class="col-lg-8 col-xxl-6">
                            <div class="text-left my-5">
                                <nav aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="https://uimsolutions.github.io/uim/api/index.html">API</a></li><li class="breadcrumb-item"><a href="https://uimsolutions.github.io/uim/api/uim/index.html">uim</a></li><li class="breadcrumb-item"><a href="https://uimsolutions.github.io/uim/api/uim/caches/index.html">caches</a></li><li class="breadcrumb-item"><a href="https://uimsolutions.github.io/uim/api/uim/caches/classes/index.html">classes</a></li><li class="breadcrumb-item"><a href="https://uimsolutions.github.io/uim/api/uim/caches/classes/engines/index.html">engines</a></li><li class="breadcrumb-item active" aria-current="page">file</li></ol></nav>
                                <h1 class="fw-bolder mb-3">Class DFileCacheEngine</h1>
                                <table><tr><td>super:DCacheEngine</td></tr><tr><td>filepath:C:\Users\ONS\PROJECTS2023\uim\caches\uim\caches\classes\engines\file.d</td></tr><tr><td>parents:["DCacheEngine"]</td></tr><tr><td>namespace:uim.caches.classes.engines.file</td></tr><tr><td>name:DFileCacheEngine</td></tr><tr><td>content:["    mixin(CacheEngineThis!(\"File\"));","    override bool initialize(Json[string] initData = null) {","        if (!super.initialize(initData)) {","            return false;","        }","        configuration","            .setDefault(\"duration\", 3600) // `duration` Specify how long items in this cache configuration last.","            .setDefault(\"groups\", Json.emptyArray) // `groups` List of groups or \"tags\" associated to every key stored in this config.","            .setDefault(\"lock\", true) // `lock` Used by FileCache. Should files be locked before writing to them?","            .setDefault(\"mask\", std.conv.octal!\"664\") // `mask` The mask used for created files","            .setDefault(\"dirMask\", std.conv.octal!\"770\") // `dirMask` The mask used for created folders","            .setDefault(\"path\", Json(null)) // `path` Path to where cachefiles should be saved. Defaults to system\"s temp dir.","            .setDefault(\"prefix\", \"uim_\") // `prefix` Prepended to all entries.","            .setDefault(\"serialize\", true); // `serialize` Should cache objects be serialized first.","        /*","        string path = configuration.getString(\"path\", sys_get_temp_dir() ~ DIRECTORY_SEPARATOR ~ \"uim_cache\" ~ DIRECTORY_SEPARATOR);","        configuration.set(\"path\", path.subString(-1) != DIRECTORY_SEPARATOR","            ? path ~ DIRECTORY_SEPARATOR","            : path;","        if (_groupPrefix) {","            _groupPrefix = _groupPrefix.replace(\"_\", DIRECTORY_SEPARATOR);","        }","        return _active(); */","        return true;","    }","    override long decrement(string itemKey, int decValue = 1) {","        // TODO throw new DLogicException(\"Files cannot be atomically decremented.\");","        return 0;","    }","    override long increment(string itemKey, int incValue = 1) {","        // TODO","        // throw new DLogicException(\"Files cannot be atomically incremented.\");","        return 0;","    }","    // True unless FileEngine.__active(); fails","    protected bool _init = true;","    // Instance of SplFileObject class","    // TODO protected DSplFileObject _splFileObject;","    // Write data for key into cache","    /* override */ bool set(string dataId, Json cacheData, long timeToLive = 0) {","        /* TODO if (cacheData is null || !_init) {","            return false;","        }","        auto aKey = internalKey(dataId);","        if (_setKey(aKey, true) == false) {","            return false;","        }","        if (!configuration.isEmpty(\"serialize\")) {","            cacheData = serialize(cacheData);","        }","        myexpires = time() + duration(timeToLive);","        mycontents = [myexpires, D_EOL, cacheData, D_EOL].join();","        if (configuration.hasKey(\"lock\")) {","            _File.flock(LOCK_EX);","        }","        _File.rewind();","        mysuccess = _File.ftruncate(0) &&","            _File.fwrite(mycontents) &&","            _File.fflush();","        if (configuration.hasKey(\"lock\")) {","            _File.flock(LOCK_UN);","        }","        _File = null;","        return mysuccess; */","        return false;","    }","    /*","    // Read a key from the cache","    Json get(string dataId, Json defaultValue = Json(null)) {","        auto key = internalKey(dataId);","        if (!_init || _setcorrectKey(key) == false) {","            return defaultValue;","        }","        if (configuration.hasKey(\"lock\")) {","            _File.flock(LOCK_SH);","        }","        _File.rewind();","        auto mytime = time();","        auto mycachetime = to!int(_File.currentValue());","        if (mycachetime < mytime) {","            if (configuration.hasKey(\"lock\")) {","                _File.flock(LOCK_UN);","            }","            return defaultValue;","        }","        string myData = \"\";","        _File.next();","        while (_File.valid()) {","            /** @psalm-suppress PossiblyInvalidOperand * /","            myData ~= _File.currentValue();","            _File.next();","        }","        if (configuration.hasKey(\"lock\")) {","            _File.flock(LOCK_UN);","        }","        myData = myData.strip;","        if (myData != \"\" && !configuration.isEMpty(\"serialize\")) {","            myData = unserialize(myData);","        }","        return myData;","    }","    // Delete a key from the cache","    override bool removeKey(string dataId) {","        auto key = internalKey(dataId);","        if (_setcorrectKey(key) == false || !_init) {","            return false;","        }","        auto mypath = _File.getRealPath();","        removeKey(_File);","        return mypath.isEmpty","            ? false","            : @unlink(mypath) ;","    }","    // Delete all values from the cache","    bool clear() {","        if (!_init) {","            return false;","        }","        removeKey(_File);","        _clearDirectory(configuration.get(\"path\"]);","        mydirectory = new DRecursiveDirectoryIterator(","            configuration.get(\"path\"],","            FilesystemIterator.SKIP_DOTS","       );","        /** @var \\RecursiveDirectoryIterator<\\SplFileInfo> myiterator Coerce for Dstan/psalm * /","        auto myIterator = new DRecursiveIteratorIterator(","            mydirectory,","            RecursiveIteratorIterator.SELF_FIRST","       );","        string[] mycleared;","        myiterator.each!((myfileInfo) {","            if (myfileInfo.isFile()) {","                removeKey(myfileInfo);","                continue;","            }","            auto myrealPath = myfileInfo.getRealPath();","            if (!myrealPath) {","                removeKey(myfileInfo);","                continue;","            }","            string mypath = myrealPath ~ DIRECTORY_SEPARATOR;","            if (!mycleared.has(mypath)) {","                _clearDirectory(mypath);","                mycleared ~= mypath;","            }","            // possible inner iterators need to be unset too in order for locks on parents to be released","            removeKey(myfileInfo);","        });","        // unsetting iterators helps releasing possible locks in certain environments,","        // which could otherwise make `rmdir()` fail","        removeKey(mydirectory, myiterator);","        return true;","    }","    // Used to clear a directory of matching files.","    protected void _clearDirectory(string pathToSearch) {","        if (!isDir(pathToSearch)) {","            return;","        }","        auto mydir = dir(pathToSearch);","        if (!mydir) {","            return;","        }","        myprefixLength = configuration.get(\"prefix\").length;","        while ((myentry = mydir.read()) == true) {","            if (subString(myentry, 0, myprefixLength) != configuration.get(\"prefix\")) {","                continue;","            }","            try {","                myfile = new DSplFileObject(mypath ~ myentry, \"r\");","            } catch (Exception) {","                continue;","            }","            if (myfile.isFile()) {","                myfilePath = myfile.getRealPath();","                removeKey(myfile);","            }","        }","        mydir.close();","    }","    /**","     * Sets the current cache key this class is managing, and creates a writable SplFileObject","     * for the cache file the key is referring to.","     */","    /* protected bool _setKey(string key, bool createKeyIfNotExists = false) {","        mygroups = null;","        if (_groupPrefix) {","            mygroups = vsprintf(_groupPrefix, this.groups());","        }","        mydir = configuration.getString(\"path\") ~ mygroups;","        if (!isDir(mydir)) {","            mkdir(mydir, configuration.get(\"dirMask\"), true);","        }","        mypath = new DSplFileInfo(mydir ~ key);","        if (!createKeyIfNotExists && !mypath.isFile()) {","            return false;","        }","        /** @psalm-suppress TypeDoesNotContainType * /","        if (","            _File is null ||","            _File.getBasename() != key ||","            _File.valid() == false","           ) {","            myexists = isFile(mypath.getPathname());","            try {","                _File = mypath.openFile(\"c+\");","            } catch (Exception exception) {","                trigger_error(exception.message(), ERRORS.USER_WARNING);","                return false;","            }","            mypath = null;","            if (!myexists && !chmod(_File.getPathname(), configuration.getLong(\"mask\"])) {","                trigger_error(","                    \"Could not apply permission mask `%s` on cache file `%s`\"","                        .format(_File.getPathname(),","                            configuration.get(\"mask\"]","                       ), ERRORS.USER_WARNING);","            }","        }","        return true;","    } */","    // Determine if cache directory is writable","    /* protected bool _active() {","        mydir = new DSplFileInfo(configuration.get(\"path\"]);","        mypath = mydir.getPathname();","        mysuccess = true;","        if (!isDir(mypath)) {","            mysuccess = @mkdir(mypath, configuration.get(\"dirMask\"], true) ;","        }","        myisWritableDir = (mydir.isDir() && mydir.isWritable());","        if (!mysuccess || (_init && !myisWritableDir)) {","            _init = false;","            trigger_error(\"%s is not writable\"","                    .format(configuration.get(\"path\"]","                   ), ERRORS.USER_WARNING);","        }","        return mysuccess;","    } */","    override protected string internalKey(string key) {","        // auto newKey = super.internalcorrectKey(key);","        /* return rawUrlEncode(newKey); */","        return null;","    }","    // Recursively deletes all files under any directory named as mygroup","    override bool clearGroup(string groupName) {","        // TODO","        /* removeKey(_File);","        string myprefix = configuration.getString(\"prefix\");","        DRecursiveDirectoryIterator mydirectoryIterator = new DRecursiveDirectoryIterator(","            configuration.get(\"path\"));","        DRecursiveIteratorIterator mycontents = new DRecursiveIteratorIterator(","            mydirectoryIterator,","            RecursiveIteratorIterator.CHILD_FIRST","       );","        // TODO","        /*","        SplFileInfo[] myfiltered = new DCallbackFilterIterator(","            mycontents,","            auto(SplFileInfo mycurrent) use(groupName, myprefix) {","            if (!mycurrent.isFile()) {","                return false;}","                myhasPrefix = myprefix is null || str_starts_with(mycurrent.getBasename(), myprefix);","                    return myhasPrefix","                    ? mycurrent.getPathname()","                    .has(","                        DIRECTORY_SEPARATOR ~ groupName ~ DIRECTORY_SEPARATOR","                   ) : false;}","               );","                myfiltered.each!((obj) {","                    auto mypath = obj.getPathName(); removeKey(obj); @unlink(mypath) ;","                });","                // unsetting iterators helps releasing possible locks in certain environments,","                // which could otherwise make `rmdir()` fail","                removeKey(mydirectoryIterator, mycontents, myfiltered);","                return true;","            }","        } */","        return false;","    }"]</td></tr><tr><td>methods:[{"isProperty":false,"parameters":["Json[string] initData = null"],"datatype":"bool","name":"initialize","isAbstract":false,"isInherited":true,"header":"bool initialize(Json[string] initData = null)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (!super.initialize(initData))","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (_groupPrefix)","isStatic":false},{"isProperty":false,"parameters":["string itemKey","int decValue = 1"],"datatype":"long","name":"decrement","isAbstract":false,"isInherited":true,"header":"long decrement(string itemKey, int decValue = 1)","isStatic":false},{"isProperty":false,"parameters":["string itemKey","int incValue = 1"],"datatype":"long","name":"increment","isAbstract":false,"isInherited":true,"header":"long increment(string itemKey, int incValue = 1)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (_setKey(aKey, true) == false)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (!configuration.isEmpty(\"serialize\"))","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (configuration.hasKey(\"lock\"))","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (configuration.hasKey(\"lock\"))","isStatic":false},{"isProperty":false,"parameters":["string dataId","Json defaultValue = Json"],"datatype":"Json","name":"get","isAbstract":false,"isInherited":false,"header":"Json get(string dataId, Json defaultValue = Json(null))","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (!_init || _setcorrectKey(key) == false)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (configuration.hasKey(\"lock\"))","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (mycachetime < mytime)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (configuration.hasKey(\"lock\"))","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"while","name":"","isAbstract":false,"isInherited":false,"header":"while (_File.valid())","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (configuration.hasKey(\"lock\"))","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (myData != \"\" && !configuration.isEMpty(\"serialize\"))","isStatic":false},{"isProperty":false,"parameters":["string dataId"],"datatype":"bool","name":"removeKey","isAbstract":false,"isInherited":true,"header":"bool removeKey(string dataId)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (_setcorrectKey(key) == false || !_init)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"bool","name":"clear","isAbstract":false,"isInherited":false,"header":"bool clear()","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (!_init)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"myiterator.each!((myfileInfo)","name":"","isAbstract":false,"isInherited":false,"header":"myiterator.each!((myfileInfo)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (myfileInfo.isFile())","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (!myrealPath)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (!mycleared.has(mypath))","isStatic":false},{"isProperty":false,"parameters":["string pathToSearch"],"datatype":"protected","name":"void _clearDirectory","isAbstract":false,"isInherited":false,"header":"protected void _clearDirectory(string pathToSearch)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (!isDir(pathToSearch))","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (!mydir)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"while","name":"","isAbstract":false,"isInherited":false,"header":"while ((myentry = mydir.read()) == true)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (subString(myentry, 0, myprefixLength) != configuration.get(\"prefix\"))","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (myfile.isFile())","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (_groupPrefix)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (!isDir(mydir))","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (!createKeyIfNotExists && !mypath.isFile())","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (!myexists && !chmod(_File.getPathname(), configuration.getLong(\"mask\"]))","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (!isDir(mypath))","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (!mysuccess || (_init && !myisWritableDir))","isStatic":false},{"isProperty":false,"parameters":["string key"],"datatype":"protected","name":"string internalKey","isAbstract":false,"isInherited":true,"header":"protected string internalKey(string key)","isStatic":false},{"isProperty":false,"parameters":["string groupName"],"datatype":"bool","name":"clearGroup","isAbstract":false,"isInherited":true,"header":"bool clearGroup(string groupName)","isStatic":false},{"isProperty":false,"parameters":["groupName","myprefix"],"datatype":"auto(SplFileInfo","name":"mycurrent) use","isAbstract":false,"isInherited":false,"header":"auto(SplFileInfo mycurrent) use(groupName, myprefix)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (!mycurrent.isFile())","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"myfiltered.each!((obj)","name":"","isAbstract":false,"isInherited":false,"header":"myfiltered.each!((obj)","isStatic":false}]</td></tr><tr><td>type:class</td></tr></table>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            <!-- About section one-->
            <section class="py-5 bg-light" id="scroll-target">
                <div class="container px-5 my-5">
                </div>
            </section>
        </main>
        <!-- Footer-->
        <footer class="bg-dark py-4 mt-auto">
    <div class="container px-5">
        <div class="row align-items-center justify-content-between flex-column flex-sm-row">
            <div class="col-auto"><div class="small m-0 text-white">Copyright &copy; 2015 - 2024 Ozan Nurettin Süel</div></div>
            <div class="col-auto">
                <a class="link-light small" href="#!">Privacy</a>
                <span class="text-white mx-1">&middot;</span>
                <a class="link-light small" href="#!">Terms</a>
                <span class="text-white mx-1">&middot;</span>
                <a class="link-light small" href="#!">Contact</a>
            </div>
        </div>
    </div>
</footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
