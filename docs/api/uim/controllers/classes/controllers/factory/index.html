<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Modern Business - uim Framework</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="https://uimsolutions.github.io/uim/assets/favicon.ico" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="https://uimsolutions.github.io/uim/css/styles.css" rel="stylesheet" />
    </head>
    <body class="d-flex flex-column">
        <main class="flex-shrink-0">
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container px-5">
        <a class="navbar-brand" href="index.html">uim</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
                <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
                <li class="nav-item"><a class="nav-link" href="faq.html">FAQ</a></li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdownBlog" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Packages</a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownBlog">
                        <li><a class="dropdown-item" href="blog-home.html">Blog Home</a></li>
                        <li><a class="dropdown-item" href="blog-post.html">Blog Post</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdownBlog" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Blog</a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownBlog">
                        <li><a class="dropdown-item" href="blog-home.html">Blog Home</a></li>
                        <li><a class="dropdown-item" href="blog-post.html">Blog Post</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdownPortfolio" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Portfolio</a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownPortfolio">
                        <li><a class="dropdown-item" href="portfolio-overview.html">Portfolio Overview</a></li>
                        <li><a class="dropdown-item" href="portfolio-item.html">Portfolio Item</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>	

            <!-- Header-->
            <header class="py-5">
                <div class="container px-5">
                    <div class="row justify-content-center">
                        <div class="col-lg-8 col-xxl-6">
                            <div class="text-left my-5">
                                <nav aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="https://uimsolutions.github.io/uim/api/index.html">API</a></li><li class="breadcrumb-item"><a href="https://uimsolutions.github.io/uim/api/uim/index.html">uim</a></li><li class="breadcrumb-item"><a href="https://uimsolutions.github.io/uim/api/uim/controllers/index.html">controllers</a></li><li class="breadcrumb-item"><a href="https://uimsolutions.github.io/uim/api/uim/controllers/classes/index.html">classes</a></li><li class="breadcrumb-item"><a href="https://uimsolutions.github.io/uim/api/uim/controllers/classes/controllers/index.html">controllers</a></li><li class="breadcrumb-item active" aria-current="page">factory</li></ol></nav>
                                <h1 class="fw-bolder mb-3">Class DControllerFactory</h1>
                                <table><tr><td>filepath:C:\Users\ONS\PROJECTS2023\uim\controllers\uim\controllers\classes\controllers\factory.d</td></tr><tr><td>parents:[]</td></tr><tr><td>namespace:uim.controllers.classes.controllers.factory</td></tr><tr><td>name:DControllerFactory</td></tr><tr><td>content:["    mixin TConfigurable;","    this() {","        initialize;","    }","    this(Json[string] initData) {","        initialize(initData);","    }","    this(IContainer container) {","        _container = container;","    }","    bool initialize(Json[string] initData = null) {","        configuration(MemoryConfiguration);","        configuration.data(initData);","        return true;","    }","    mixin(TProperty!(\"string\", \"name\"));","    protected IContainer _container;","    protected IController _controller;","    /**","     * Create a controller for a given request.","     * Params:","     * \\Psr\\Http\\Message\\IServerRequest serverRequest The request to build a controller for.","     */","    IController create(IServerRequest serverRequest) {","        /* assert(cast(IServerRequest) request);","        auto classname = getControllerClass(request);","        if (classname.isNull) {","            throw missingController(request);","        }","        auto myreflection = new DReflectionClass(classname);","        if (reflection.isAbstract()) {","            throw this.missingController(request);","        }","        // Get the controller from the container if defined.","        // The request is in the container by default.","        return this.container.has(classname)","            ? this.container.get(classname)","            : reflection.newInstance(request); */","        return null;","    }","    // Invoke a controller`s action and wrapping methods","    IResponse invoke(IController controller) {","        /* _controller = controller;","         auto middlewares = controller.getMiddleware();","        if (middlewares) {","            auto middlewareQueue = new DMiddlewareQueue(middlewares, this.container);","            aut runner = new DRunner();","            return runner.run(middlewareQueue, controller.getRequest(), this);","        }","        return _handle(controller.getRequest()); */","        return null;","    }","    /**","     * Invoke the action.","     * Params:","     * \\Psr\\Http\\Message\\IServerRequest serverRequest Request instance.","     */","    IResponse handle(IServerRequest serverRequest) {","        auto controller = _controller;","        controller.setRequest(request);","        auto result = controller.startupProcess();","        if (result) {","            return result;","        }","        auto action = controller.getAction();","        auto someArguments = getActionArgs(","            action,","            /* (array) * /controller.getRequest().getParam(\"pass\").values","       );","        controller.invokeAction(action, someArguments);","        result = controller.shutdownProcess();","        if (!result.isNull) {","            return result;","        }","        return controller.getResponse(); */","        return null;","    }","    // Get the arguments for the controller action invocation.","    protected Json[string] getActionArgs(IClosure action, Json[string] passedParams) {","         auto resolved = null;","        foreach (parameter; function.getParameters()) {","            type = parameter.getType();","            // Check for dependency injection for classes","            if (cast(ReflectionNamedType)type  && !type.isBuiltin()) {","                typeName = type.name;","                if (this.container.has(typeName)) {","                     resolved ~= this.container.get(typeName);","                    continue;","                }","                // Use passedParams as a source of typed dependencies.","                // The accepted types for passedParams was never defined and userland code relies on that.","                if (passedParams && isObject(passedParams[0]) && cast(typeName)passedParams[0]) {","                     resolved ~= passedParams.shift();","                    continue;","                }","                // Add default value if provided","                // Do not allow positional arguments for classes","                if (parameter.isDefaultValueAvailable()) {","                     resolved ~= parameter.getDefaultValue();","                    continue;","                }","                throw new DInvalidParameterException([","                    \"template\": \"missing_dependency\",","                    \"parameter\": parameter.name,","                    \"type\": typeName,","                    \"controller\": _controller.name,","                    \"action\": request.getParam(\"action\"),","                    \"prefix\": request.getParam(\"prefix\"),","                    \"plugin\": request.getParam(\"plugin\"),","                ]);"," * /            }","            // Use any passed params as positional arguments","            if (passedParams) {","                argument = passedParams.shift;","                if (isString(argument) && cast(ReflectionNamedType)type ) {","                    typedArgument = this.coerceStringToType(argument, type);","                    if (typedArgument.isNull) {","                        throw new DInvalidParameterException(createMap!(string, Json)","                            .set(\"template\", \"failed_coercion\")","                            .set(\"passed\", argument)","                            .set(\"type\", type.name)","                            .set(\"parameter\", parameter.name)","                            .set(\"controller\", _controller.name)","                            .set(\"action\", _controller.getRequest().getParam(\"action\"))","                            .set(\"prefix\", _controller.getRequest().getParam(\"prefix\"))","                            .set(\"plugin\", _controller.getRequest().getParam(\"plugin\")));","                    }","                    argument = typedArgument;","                }","                 resolved ~= argument;","                continue;","            }","            // Add default value if provided","            if (parameter.isDefaultValueAvailable()) {","                 resolved ~= parameter.getDefaultValue();","                continue;","            }","            // Variadic parameter can have 0 arguments","            if (parameter.isVariadic()) {","                continue;","            }","            throw new DInvalidParameterException(createMap!(string, Json)","                .set(\"template\", \"missing_parameter\")","                .set(\"parameter\", parameter.name)","                .set(\"controller\", _controller.name)","                .set(\"action\", _controller.getRequest().getParam(\"action\"))","                .set(\"prefix\", _controller.getRequest().getParam(\"prefix\"))","                .set(\"plugin\", _controller.getRequest().getParam(\"plugin\")));","        }","        return array_merge(resolved, passedParams); */","        return null;","    }","    // Coerces string argument to primitive type.","    protected string[] coerceStringToType(string argumentToCoerce, /* IReflectionNamedType */ string parameterType) {","            \"string\": argumentToCoerce,","            \"float\": isNumeric(argumentToCoerce) ? (float)argumentToCoerce : null,","            \"int\": filter_var(argumentToCoerce, FILTER_VALIDATE_INT, FILTER_NULL_ON_FAILURE),","            \"bool\": argumentToCoerce == \"0\" ? false : (argumentToCoerce == \"1\" ? true : null),","            \"array\": argumentToCoerce is null ? [] : split(\",\", argumentToCoerce),","            default: Json(null),","        };","    */","    return null;"," }","    /**","     * Determine the controller class name based on current request and controller param","     * Params:","     * \\UIM\\Http\\ServerRequest serverRequest The request to build a controller for.","     */","    string getControllerClass(IServerRequest serverRequest) {","        /* pluginPath = \"\";","        namespace = \"Controller\";","        controller = request.getParam(\"controller\", \"\");","        if (request.getParam(\"plugin\")) {","            pluginPath = request.getParam(\"plugin\") ~ \".\";","        }","        if (request.getParam(\"prefix\")) {","            prefix = request.getParam(\"prefix\");","            namespace ~= \"/\" ~ prefix;","        }","        firstChar = subString(controller, 0, 1);","        // Disallow plugin short forms, / and \\\\ from","        // controller names as they allow direct references to","        // be created.","        if (","            controller.contains(\"\\\\\") ||","            controller.contains(\"/\") ||","            controller.contains(\".\") ||","            firstChar == firstChar.lower","       ) {","            throw this.missingController(request);","        }","        /** @var class-string<\\UIM\\Controller\\Controller>|null * /","        return App.classname(pluginPath ~ controller, namespace, \"Controller\"); */","        return null;","    }","    /**","     * Throws an exception when a controller is missing.","     * Params:","     * \\UIM\\Http\\ServerRequest serverRequest The request.","     */","    //protected IMissingControllerException missingController(ServerRequest serverRequest) {","            \"controller\": request.getParam(\"controller\"),","            \"plugin\": request.getParam(\"plugin\"),","            \"prefix\": request.getParam(\"prefix\"),","            \"_ext\": request.getParam(\"_ext\"),","        ]);"," */"," //return null;    }"]</td></tr><tr><td>methods:[{"isProperty":false,"datatype":null,"name":"this","isAbstract":false,"isInherited":false,"header":"this()","isStatic":false},{"isProperty":false,"datatype":null,"name":"this","isAbstract":false,"isInherited":false,"header":"this(Json[string] initData)","isStatic":false},{"isProperty":false,"datatype":null,"name":"this","isAbstract":false,"isInherited":false,"header":"this(IContainer container)","isStatic":false},{"isProperty":false,"parameters":["Json[string] initData = null"],"datatype":"bool","name":"initialize","isAbstract":false,"isInherited":false,"header":"bool initialize(Json[string] initData = null)","isStatic":false},{"isProperty":false,"parameters":["IServerRequest serverRequest"],"datatype":"IController","name":"create","isAbstract":false,"isInherited":false,"header":"IController create(IServerRequest serverRequest)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (classname.isNull)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (reflection.isAbstract())","isStatic":false},{"isProperty":false,"parameters":["IController controller"],"datatype":"IResponse","name":"invoke","isAbstract":false,"isInherited":false,"header":"IResponse invoke(IController controller)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (middlewares)","isStatic":false},{"isProperty":false,"parameters":["IServerRequest serverRequest"],"datatype":"IResponse","name":"handle","isAbstract":false,"isInherited":false,"header":"IResponse handle(IServerRequest serverRequest)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (result)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (!result.isNull)","isStatic":false},{"isProperty":false,"parameters":["IClosure action","Json[string] passedParams"],"datatype":"protected","name":"Json[string] getActionArgs","isAbstract":false,"isInherited":false,"header":"protected Json[string] getActionArgs(IClosure action, Json[string] passedParams)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"foreach","name":"","isAbstract":false,"isInherited":false,"header":"foreach (parameter; function.getParameters())","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (cast(ReflectionNamedType)type  && !type.isBuiltin())","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (this.container.has(typeName))","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (passedParams && isObject(passedParams[0]) && cast(typeName)passedParams[0])","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (parameter.isDefaultValueAvailable())","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (passedParams)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (isString(argument) && cast(ReflectionNamedType)type )","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (typedArgument.isNull)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (parameter.isDefaultValueAvailable())","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (parameter.isVariadic())","isStatic":false},{"isProperty":false,"parameters":["string argumentToCoerce","/* IReflectionNamedType */ string parameterType"],"datatype":"protected","name":"string[] coerceStringToType","isAbstract":false,"isInherited":false,"header":"protected string[] coerceStringToType(string argumentToCoerce, /* IReflectionNamedType */ string parameterType)","isStatic":false},{"isProperty":false,"parameters":["IServerRequest serverRequest"],"datatype":"string","name":"getControllerClass","isAbstract":false,"isInherited":false,"header":"string getControllerClass(IServerRequest serverRequest)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (request.getParam(\"plugin\"))","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (request.getParam(\"prefix\"))","isStatic":false}]</td></tr><tr><td>type:class</td></tr></table>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            <!-- About section one-->
            <section class="py-5 bg-light" id="scroll-target">
                <div class="container px-5 my-5">
                </div>
            </section>
        </main>
        <!-- Footer-->
        <footer class="bg-dark py-4 mt-auto">
    <div class="container px-5">
        <div class="row align-items-center justify-content-between flex-column flex-sm-row">
            <div class="col-auto"><div class="small m-0 text-white">Copyright &copy; 2015 - 2024 Ozan Nurettin Süel</div></div>
            <div class="col-auto">
                <a class="link-light small" href="#!">Privacy</a>
                <span class="text-white mx-1">&middot;</span>
                <a class="link-light small" href="#!">Terms</a>
                <span class="text-white mx-1">&middot;</span>
                <a class="link-light small" href="#!">Contact</a>
            </div>
        </div>
    </div>
</footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
