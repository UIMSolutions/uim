<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Modern Business - uim Framework</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="https://uimsolutions.github.io/uim/assets/favicon.ico" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="https://uimsolutions.github.io/uim/css/styles.css" rel="stylesheet" />
    </head>
    <body class="d-flex flex-column">
        <main class="flex-shrink-0">
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container px-5">
        <a class="navbar-brand" href="index.html">uim</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
                <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
                <li class="nav-item"><a class="nav-link" href="faq.html">FAQ</a></li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdownBlog" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Packages</a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownBlog">
                        <li><a class="dropdown-item" href="blog-home.html">Blog Home</a></li>
                        <li><a class="dropdown-item" href="blog-post.html">Blog Post</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdownBlog" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Blog</a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownBlog">
                        <li><a class="dropdown-item" href="blog-home.html">Blog Home</a></li>
                        <li><a class="dropdown-item" href="blog-post.html">Blog Post</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdownPortfolio" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Portfolio</a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownPortfolio">
                        <li><a class="dropdown-item" href="portfolio-overview.html">Portfolio Overview</a></li>
                        <li><a class="dropdown-item" href="portfolio-item.html">Portfolio Item</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>	

            <!-- Header-->
            <header class="py-5">
                <div class="container px-5">
                    <div class="row justify-content-center">
                        <div class="col-lg-8 col-xxl-6">
                            <div class="text-left my-5">
                                <nav aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="https://uimsolutions.github.io/uim/api/index.html">API</a></li><li class="breadcrumb-item"><a href="https://uimsolutions.github.io/uim/api/uim/index.html">uim</a></li><li class="breadcrumb-item"><a href="https://uimsolutions.github.io/uim/api/uim/errors/index.html">errors</a></li><li class="breadcrumb-item"><a href="https://uimsolutions.github.io/uim/api/uim/errors/classes/index.html">classes</a></li><li class="breadcrumb-item"><a href="https://uimsolutions.github.io/uim/api/uim/errors/classes/renderers/index.html">renderers</a></li><li class="breadcrumb-item"><a href="https://uimsolutions.github.io/uim/api/uim/errors/classes/renderers/web/index.html">web</a></li><li class="breadcrumb-item active" aria-current="page">exception</li></ol></nav>
                                <h1 class="fw-bolder mb-3">Class configure your class in your config/app.d.</h1>
                                <table><tr><td>filepath:C:\Users\ONS\PROJECTS2023\uim\errors\uim\errors\classes\renderers\web\exception.d</td></tr><tr><td>parents:[]</td></tr><tr><td>namespace:uim.errors.classes.renderers.web.exception</td></tr><tr><td>name:configure your class in your config/app.d.</td></tr><tr><td>content:["    /**","     * Creates the controller to perform rendering on the error response.","     * Params:","     * \\Throwable exception Exception.","     * instead of creating a new one.","     */","    this(DThrowable exception, ServerRequest serverRequest = null) {","        _error = exception;","        _request = serverRequest;","        _controller = _getController();","    }","    // Controller instance.","    protected IErrorController controller;","    // Template to render for {@link \\UIM\\Core\\Exception\\DException}","    protected string atemplate = \"\";","    // The method corresponding to the Exception this object is for.","    protected string methodName = \"\";","    /**","     * The exception being handled.","     *","     * @var \\Throwable","     */","    protected Throwable error;","    /**","     * If set, this will be request used to create the controller that will render","     * the error.","     *","     * @var \\UIM\\Http\\ServerRequest|null","     */","    protected IServerRequest serverRequest;","    /**","     * Map of exceptions to http status codes.","     *","     * This can be customized for users that don`t want specific exceptions to throw 404 errors","     * or want their application exceptions to be automatically converted.","     *","     * @var array<string, int>","     * @psalm-var array<class-string<\\Throwable>, int>","     */","    protected Json[string] exceptionHttpCodes = [","        // Controller exceptions","        InvalidParameterException.classname: 404,","        MissingActionException.classname: 404,","        // Datasource exceptions","        PageOutOfBoundsException.classname: 404,","        RecordNotFoundException.classname: 404,","        // Http exceptions","        MissingControllerException.classname: 404,","        // Routing exceptions","        MissingRouteException.classname: 404,","    ];","    /**","     * Get the controller instance to handle the exception.","     * Override this method in subclasses to customize the controller used.","     * This method returns the built in `ErrorController` normally, or if an error is repeated","     * a bare controller will be used.","     */","    protected IErrorController _getController() {","        request = _request;","        routerRequest = Router.getRequest();","        // Fallback to the request in the router or make a new one from","        // _SERVER","        if (request.isNull) {","            request = routerRequest ? routerRequest : ServerRequestFactory.fromGlobals();","        }","        // If the current request doesn`t have routing data, but we","        // found a request in the router context copy the params over","        if (request.getParam(\"controller\").isNull && routerRequest !is null) {","            request = request.withAttribute(\"params\", routerRequest.getAttribute(\"params\"));","        }","        try {","            params = request.getAttribute(\"params\");","            params.set(\"controller\", \"Error\");","            auto factory = new DControllerFactory(new DContainer());","            // Check including plugin + prefix","            auto classname = factory.getControllerClass(request.withAttribute(\"params\", params));","            if (!classname && !params.isEmpty(\"prefix\") && !params.isEmpty(\"plugin\")) {","                params.removeKey(\"prefix\");","                // Fallback to only plugin","                classname = factory.getControllerClass(request.withAttribute(\"params\", params));","            }","            if (!classname) {","                // Fallback to app/core provided controller.","                classname = App.classname(\"Error\", \"Controller\", \"Controller\");","            }","            assert(isSubclass_of(classname, Controller.classname));","            controller = new classname(request);","            controller.startupProcess();","        } catch (Throwable anException) {","        }","        return controller is null","            ? new DController(request) : controller;","    }","    // Clear output buffers so error pages display properly.","    protected void clearOutput() {","        if (isIn(UIM_SAPI, [\"cli\", \"Ddbg\"])) {","            return;","        }","        while (ob_get_level()) {","            ob_end_clean();","        }","    }","    // Renders the response for the exception.","    IResponse render() {","        /* auto exception = _error;","        auto code = getHttpCode(exception);","        auto method = methodName(exception);","        auto templateText = templateName(exception, method, code);","        clearOutput();","        if (hasMethod(this, method)) {","            return _customMethod(method, exception);","        }","        string message = errorMessage(exception, code);","        auto url = _controller.getRequest().getRequestTarget();","        auto response = _controller.getResponse();","        if (cast(HttpException) exception) {","            exception.getHeaders().byKeyValue","                .each!(nameValue => response = response.withHeader(nameValue.name, nameValue.value));","        }","        response = response.withStatus(code);","        auto exceptions = [exception];","        auto previous = exception.getPrevious();","        while (!previous.isNull) {","            exceptions ~= previous;","            previous = previous.getPrevious();","        }","        auto viewVars = [","            \"message\": message,","            \"url\": htmlAttributeEscape(url),","            \"error\": exception,","            \"exceptions\": exceptions,","            \"code\": code,","        ];","        auto serialize = [\"message\", \"url\", \"code\"];","        auto isDebug = configuration.get(\"debug\");","        if (isDebug) {","            trace =/*  (array) * / Debugger.formatTrace(exception.getTrace(), [","                    \"format\": \"array\",","                    \"args\": true.toJson,","                ]);","            origin = [","                \"file\": exception.getFile().ifEmpty(\"null\"),","                \"line\": exception.getLine().ifEmpty(\"null\"),","            ];","            // Traces don`t include the origin file/line.","            trace.unshift(origin);","            viewVars.set(\"trace\", trace);","            viewVars += origin;","            serialize ~= \"file\";","            serialize ~= \"line\";","        }","        _controller.set(viewVars);","        _controller.viewBuilder().setOption(\"serialize\", serialize);","        if (cast(DException) exception && isDebug) {","            _controller.set(exception.getAttributes());","        }","        _controller.setResponse(response);","        return _outputMessage(template); */","        return null;","    }","    /**","     * Emit the response content","     * Params:","     * \\Psr\\Http\\Message\\IResponse|string aoutput The response to output.","     */","    void write(string outputText) {","        writeln(output);","    }","    void write(IResponse outputResponse) {","        auto emitter = new DResponseEmitter();","        emitter.emit(outputResponse);","    }","    // Render a custom error method/template.","    protected DResponse _customMethod(string methodName, Throwable exceptionToRender) {","        auto result = this. {","            methodName","        }","        (exceptionToRender);","        _shutdown();","        if (isString(result)) {","            result = _controller.getResponse().withStringBody(result);","        }","        return result;","    }","    // Get method name","    protected string methodName(Throwable exception) {","        /* [, baseClass] = namespaceSplit(exception.classname);","        if (baseClass.endsWith(\"Exception\")) {","            baseClass = subString(baseClass, 0, -9);","        }","        // baseClass would be an empty string if the exception class is \\Exception.","        method = baseClass is null ? \"error500\" : Inflector.variable(baseClass);","        return _method = method; */","        return null;","    }","    // Get error message.","    protected string errorMessage(Throwable exception, int errorCode) {","        /* string result = exception.message();","        if (","            !configuration.hasKey(\"debug\") &&","            !(cast(HttpException) exception)","            ) {","            result = code < 500","                ? __d(\"uim\", \"Not Found\") : __d(\"uim\", \"An Internal Error Has Occurred.\");","        }","    }","    return result; */","        return null;","    }","    /**","     * Get template for rendering exception info.","     * Params:","     * \\Throwable exception Exception instance.","     */","    protected string templateName(Throwable exception, string methodName, int errorCode) {","        /* if (cast(HttpException) exception || !configuration.hasKey(\"debug\")) {","        return _template = errorCode < 500 ? \"error400' : 'error500\";","    }","    _template = cast(PDOException) exception","        ? \"pdo_error\" : methodName;","    return _template; */","        return null;","    }","    // Gets the appropriate http status code for exception.","    protected int getHttpCode(Throwable exception) {","        /* if (cast(HttpException) exception) {","            return exception.code();","        }","        return _exceptionHttpCodes[exception.classname] ?  ? 500; */","        return 0;","    }","    // Generate the response using the controller object.","    protected DResponse _outputMessage(string templateToRender) {","        /* try {","        _controller.render(templateToRender);","        return _shutdown();","    } catch (MissingTemplateException anException) {","        attributes = anException.getAttributes();","        if (","            cast(MissingLayoutException) anException ||","            attributes.getString(\"file\").contains(\"error500\")","            ) {","            return _outputMessageSafe(\"error500\");","        }","        return _outputMessage(\"error500\");","    } catch (MissingPluginException anException) {","        attributes = anException.getAttributes();","        if (attributes.getString(\"plugin\") == _controller.pluginName) {","            _controller.setPlugin(null);","        }","        return _outputMessageSafe(\"error500\");","    } catch (Throwable outer) {","        try {","            return _outputMessageSafe(\"error500\");","        } catch (Throwable anInner) {","            throw outer;","        }","    } */","        return null;","    }","    /**","     * A safer way to render error messages, replaces all helpers, with basics","     * and doesn`t call component methods.","     * Params:","     * string atemplate The template to render.","     */","    protected DResponse _outputMessageSafe(string templateText) {","        auto builder = _controller.viewBuilder();","        builder","            .setHelpers([])","            .setLayoutPath(\"\")","            .setTemplatePath(\"Error\");","        auto view = _controller.createView(\"View\");","        auto response = _controller.getResponse()","            .withType(\"html\")","            .withStringBody(view.render(templateText, \"error\"));","        _controller.setResponse(response);","        return response;","    }","    /**","     * Run the shutdown events.","     * Triggers the afterFilter and afterDispatch events.","     */","    protected DResponse _shutdown() {","        _controller.dispatchEvent(\"Controller.shutdown\");","        return _controller.getResponse();","    }","    /**","     * Returns an array that can be used to describe the internal state of this","     * object.","     */","    Json[string] debugInfo() {","        return super.debugInfo()","            .set(\"error\", _error)","            .set(\"request\", _request)","            .set(\"controller\", _controller)","            .set(\"template\", _template)","            .set(\"method\", _method);","    }"]</td></tr><tr><td>methods:[{"isProperty":false,"datatype":null,"name":"this","isAbstract":false,"isInherited":false,"header":"this(DThrowable exception, ServerRequest serverRequest = null)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"protected","name":"IErrorController _getController","isAbstract":false,"isInherited":false,"header":"protected IErrorController _getController()","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (request.isNull)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (request.getParam(\"controller\").isNull && routerRequest !is null)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (!classname && !params.isEmpty(\"prefix\") && !params.isEmpty(\"plugin\"))","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (!classname)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"protected","name":"void clearOutput","isAbstract":false,"isInherited":false,"header":"protected void clearOutput()","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (isIn(UIM_SAPI, [\"cli\", \"Ddbg\"]))","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"while","name":"","isAbstract":false,"isInherited":false,"header":"while (ob_get_level())","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"IResponse","name":"render","isAbstract":false,"isInherited":false,"header":"IResponse render()","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (hasMethod(this, method))","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (cast(HttpException) exception)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"while","name":"","isAbstract":false,"isInherited":false,"header":"while (!previous.isNull)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (isDebug)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (cast(DException) exception && isDebug)","isStatic":false},{"isProperty":false,"parameters":["string outputText"],"datatype":"void","name":"write","isAbstract":false,"isInherited":false,"header":"void write(string outputText)","isStatic":false},{"isProperty":false,"parameters":["IResponse outputResponse"],"datatype":"void","name":"write","isAbstract":false,"isInherited":false,"header":"void write(IResponse outputResponse)","isStatic":false},{"isProperty":false,"parameters":["string methodName","Throwable exceptionToRender"],"datatype":"protected","name":"DResponse _customMethod","isAbstract":false,"isInherited":false,"header":"protected DResponse _customMethod(string methodName, Throwable exceptionToRender)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (isString(result))","isStatic":false},{"isProperty":false,"parameters":["Throwable exception"],"datatype":"protected","name":"string methodName","isAbstract":false,"isInherited":false,"header":"protected string methodName(Throwable exception)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (baseClass.endsWith(\"Exception\"))","isStatic":false},{"isProperty":false,"parameters":["Throwable exception","int errorCode"],"datatype":"protected","name":"string errorMessage","isAbstract":false,"isInherited":false,"header":"protected string errorMessage(Throwable exception, int errorCode)","isStatic":false},{"isProperty":false,"parameters":["Throwable exception","string methodName","int errorCode"],"datatype":"protected","name":"string templateName","isAbstract":false,"isInherited":false,"header":"protected string templateName(Throwable exception, string methodName, int errorCode)","isStatic":false},{"isProperty":false,"parameters":["Throwable exception"],"datatype":"protected","name":"int getHttpCode","isAbstract":false,"isInherited":false,"header":"protected int getHttpCode(Throwable exception)","isStatic":false},{"isProperty":false,"parameters":["string templateToRender"],"datatype":"protected","name":"DResponse _outputMessage","isAbstract":false,"isInherited":false,"header":"protected DResponse _outputMessage(string templateToRender)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"if","name":"","isAbstract":false,"isInherited":false,"header":"if (attributes.getString(\"plugin\") == _controller.pluginName)","isStatic":false},{"isProperty":false,"parameters":["string templateText"],"datatype":"protected","name":"DResponse _outputMessageSafe","isAbstract":false,"isInherited":false,"header":"protected DResponse _outputMessageSafe(string templateText)","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"protected","name":"DResponse _shutdown","isAbstract":false,"isInherited":false,"header":"protected DResponse _shutdown()","isStatic":false},{"isProperty":false,"parameters":[],"datatype":"Json[string]","name":"debugInfo","isAbstract":false,"isInherited":false,"header":"Json[string] debugInfo()","isStatic":false}]</td></tr><tr><td>type:class</td></tr></table>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            <!-- About section one-->
            <section class="py-5 bg-light" id="scroll-target">
                <div class="container px-5 my-5">
                </div>
            </section>
        </main>
        <!-- Footer-->
        <footer class="bg-dark py-4 mt-auto">
    <div class="container px-5">
        <div class="row align-items-center justify-content-between flex-column flex-sm-row">
            <div class="col-auto"><div class="small m-0 text-white">Copyright &copy; 2015 - 2024 Ozan Nurettin Süel</div></div>
            <div class="col-auto">
                <a class="link-light small" href="#!">Privacy</a>
                <span class="text-white mx-1">&middot;</span>
                <a class="link-light small" href="#!">Terms</a>
                <span class="text-white mx-1">&middot;</span>
                <a class="link-light small" href="#!">Contact</a>
            </div>
        </div>
    </div>
</footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
